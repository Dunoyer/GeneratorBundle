{% block filters %}
    public function filtersAction()
    {
        if ($this->getRequest()->getMethod() == "POST") {
            $form = $this->getFilterForm();
            $form->handleRequest($this->getRequest());

            if ($form->isValid()) {
                $filters = $form->getViewData();
            }
        }

        if ($this->getRequest()->getMethod() == "GET") {
            $filters = $this->getRequest()->query->all();
        }

        if (isset($filters)) {
            $this->setFilters($filters);
        }

        return new RedirectResponse($this->getListUrl());
    }

    {% block setFilters -%}
    protected function setFilters($filters)
    {
        $serializer = $this->getSessionSerializer();
        $filters = $serializer->serialize($filters);
        
        $this->get('session')->set($this->getSessionPrefix().'List\Filters', $filters);
    }
    {% endblock %}

    {% block getFilters -%}
    protected function getFilters()
    {
        $serializer = $this->getSessionSerializer();
        $filters = $this->get('session')->get($this->getSessionPrefix().'List\Filters', array());

        return $serializer->deserialize($filters);
    }
    {% endblock %}

    {% block getFilterForm -%}
    protected function getFilterForm()
    {
        return $this->createForm($this->getFiltersType(), $this->getFilters(), array(
            'groups' => $this->getGroups()
        ));
    }
    {% endblock %}

    {% block getFiltersType -%}
    protected function getFiltersType()
    {
        $type = new FiltersType();
        $type->setSecurityContext($this->get('security.context'));

        return $type;
    }
    {% endblock %}

{% endblock %}